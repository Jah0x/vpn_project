# –û—Ç—á–µ—Ç –ø–æ –æ—á–∏—Å—Ç–∫–µ –∏ —É–ª—É—á—à–µ–Ω–∏—é –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –û—á–∏—Å—Ç–∫–∞ –æ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –£–¥–∞–ª–µ–Ω `stripe` (^18.2.1) - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ Onramper
- ‚úÖ –£–¥–∞–ª–µ–Ω `web-vitals` (^3.3.2) - –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤ –∫–æ–¥–µ
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω `node-fetch` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –£–¥–∞–ª–µ–Ω `STRIPE_SECRET_KEY` –∏–∑ `.env.example`
- ‚úÖ –£–¥–∞–ª–µ–Ω `STRIPE_KEY` –∏–∑ `k8s/deployment-backend.yaml`
- ‚úÖ –£–¥–∞–ª–µ–Ω `STRIPE_KEY` –∏–∑ `fly.backend.toml`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Hanko

### 3. –û—á–∏—Å—Ç–∫–∞ –∫–æ–¥–∞ –æ—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏–π Stripe
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –º–µ—Ç—Ä–∏–∫–∞ `stripeWebhookTotal` –∏–∑ `apps/server/src/metrics.ts`
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `STRIPE_SECRET_KEY` –∏–∑ `apps/server/src/index.ts`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è (–∑–∞–º–µ–Ω–µ–Ω–æ `stripeId` –Ω–∞ `onramperId`)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å `/api/billing/` –Ω–∞ `/api/pay/onramper/`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Onramper

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã —É–ø–æ–º–∏–Ω–∞–Ω–∏—è Stripe –Ω–∞ Onramper –≤ `TECH_SPEC.md`
- ‚úÖ –£–¥–∞–ª–µ–Ω `STRIPE_SECRET_KEY` –∏–∑ `README.md`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ billing —Å–∏—Å—Ç–µ–º–µ

## üîß –£–ª—É—á—à–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Hanko

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Docker
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–æ—Ä—Ç 8000 –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ Hanko
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
  - `HANKO_WEBAUTHN_RELYING_PARTY_ID`
  - `HANKO_WEBAUTHN_RELYING_PARTY_ORIGINS`
  - `HANKO_CORS_ALLOW_ORIGINS`

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env.example`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –Ω–∞–ª–∏—á–∏–µ `LoginPage.tsx` —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `<hanko-auth>`
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –Ω–∞–ª–∏—á–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ `/api/auth/hanko`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

## üìú –ù–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- ‚úÖ `scripts/install-improved.sh` - –ø–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Hanko
- ‚úÖ `scripts/update.sh` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –±—ç–∫–∞–ø–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ Hanko —á–µ—Ä–µ–∑ nginx

### 2. –°–∫—Ä–∏–ø—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- ‚úÖ `scripts/check-hanko.sh` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Hanko
- ‚úÖ `scripts/full-check.sh` - –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –∏ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–°–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è" –≤ README
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Hanko setup
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üîç –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–æ—Å—Ç–∞–≤–ª–µ–Ω—ã)

‚úÖ `@onramper/widget` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –æ–ø–ª–∞—Ç—ã
‚úÖ `@teamhanko/hanko-elements` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚úÖ `i18next` –∏ `react-i18next` - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
‚úÖ `yamljs` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚úÖ `sqlite` –∏ `sqlite3` - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ subscription-server
‚úÖ Storybook –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ - –µ—Å—Ç—å —Ñ–∞–π–ª—ã *.stories.tsx

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ —á–∏—Å—Ç–æ–º —Å–µ—Ä–≤–µ—Ä–µ Ubuntu —Å –ø–æ–º–æ—â—å—é:

```bash
# –°–∫–∞—á–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —É–ª—É—á—à–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
curl -sSL https://raw.githubusercontent.com/Jah0x/vpn_project/main/scripts/install-improved.sh | sudo bash

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é Hanko
sudo /opt/vpn_project/scripts/check-hanko.sh

# –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
sudo /opt/vpn_project/scripts/full-check.sh
```

## ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. **Onramper –∫–ª—é—á–∏** - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
   - `ONRAMPER_KEY`
   - `VITE_ONRAMPER_KEY`
   - `ONRAMPER_WEBHOOK_SECRET`

2. **–î–æ–º–µ–Ω** - –∏–∑–º–µ–Ω–∏—Ç—å `DOMAIN` –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π

3. **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** - –±—É–¥—É—Ç –ø–æ–ª—É—á–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω—ã —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ